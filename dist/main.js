(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),a=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");t.textContent="00",a.textContent="00",o.textContent="00";const n=e=>e<10?`0${e}`:e,r=()=>{const e=new Date("30 june 2021").getTime(),t=(new Date).getTime(),a=(e-t)/1e3,o=Math.floor(a%60),n=Math.floor(a/60%60);return{timeRemaining:a,hours:Math.floor(a/60/60),minutes:n,seconds:o,dateStop:e,dateNow:t}},c=setInterval((()=>r().timeRemaining<0?clearInterval(c):(t.textContent=n(r().hours),a.textContent=n(r().minutes),void(o.textContent=n(r().seconds)))),0)})(),(()=>{const e=document.querySelector("main"),t=document.querySelector("menu");let a=-10;const o=()=>{a++;const n=requestAnimationFrame(o),r=t.getBoundingClientRect(),c=e.getBoundingClientRect();c.right<768?cancelAnimationFrame(n):r.right<c.right?(t.style.transform=`translateX(${10*a}%)`,t.classList.add("active")):cancelAnimationFrame(n)},n=()=>{a--;const e=requestAnimationFrame(n),o=t.getBoundingClientRect();o.left>-o.width?(t.style.transform=`translateX(${10*a}%)`,t.classList.remove("active")):cancelAnimationFrame(e)};document.body.addEventListener("click",(e=>{e.target.closest(".menu")&&o(),e.target.closest("menu")||e.target.closest(".menu")||n(),e.target.classList.contains("close-btn")&&n(),e.target.closest("menu ul>li>a")&&n()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),a=document.querySelector(".popup-content");let o=0,n=-20;const r=()=>{o+=.1;const t=requestAnimationFrame(r);o<=1?e.style.opacity=o:cancelAnimationFrame(t)},c=()=>{o-=.1;const t=requestAnimationFrame(c);o>=0?e.style.opacity=o:cancelAnimationFrame(t)},l=()=>{n++;const e=requestAnimationFrame(l);0>=n?a.style.transform=`translate(-50px,${5*n}%)`:cancelAnimationFrame(e)},s=()=>{n--;const e=requestAnimationFrame(s);-30<=n?a.style.transform=`translate(-50px,${5*n}%)`:cancelAnimationFrame(e)};t.forEach((t=>t.addEventListener("click",(()=>{e.style.display="block",e.style.opacity="1",a.style.transform="translate(-50px,0)",document.body.clientWidth>768&&(e.style.opacity="0",a.style.transform="translate(-50px,-150%)",r(),setTimeout((()=>l()),200))})))),e.addEventListener("click",(t=>{const a=t.target.closest(".popup-content");t.target.classList.contains("popup-close")&&(document.body.clientWidth<768?e.style.display="none":(s(),setTimeout((()=>c()),400),setTimeout((()=>e.style.display="none"),500))),a||(document.body.clientWidth<768?e.style.display="none":(s(),setTimeout((()=>c()),400),setTimeout((()=>e.style.display="none"),500)))}))})(),(()=>{const e=document.querySelector("a");e.addEventListener("click",(t=>((e,t)=>{t.preventDefault();const a=e.href.split("#")[1];document.querySelector(`#${a}`).scrollIntoView({behavior:"smooth",block:"start"})})(e,t)))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{const o=e.target.closest(".service-header-tab");o&&t.forEach(((e,n)=>{e===o&&(e=>{a.forEach(((o,n)=>{e===n?(t[n].classList.add("active"),a[n].classList.remove("d-none")):(t[n].classList.remove("active"),a[n].classList.add("d-none"))}))})(n)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),a=document.querySelector(".portfolio-dots");let o,n=0;e.length&&a.insertAdjacentHTML("beforeend","<li class='dot dot-active'></li>");for(let t=0;t<e.length-1;t++)a.insertAdjacentHTML("beforeend","<li class='dot'></li>");const r=document.querySelectorAll(".dot"),c=(e,t,a)=>e[t].classList.remove(a),l=(e,t,a)=>e[t].classList.add(a),s=()=>{c(e,n,"portfolio-item-active"),c(r,n,"dot-active"),n++,n>=e.length&&(n=0),l(e,n,"portfolio-item-active"),l(r,n,"dot-active")},i=(e=3e3)=>o=setInterval(s,e);t.addEventListener("click",(t=>{t.preventDefault(),t.target.matches(".portfolio-btn, .dot")&&(c(e,n,"portfolio-item-active"),c(r,n,"dot-active"),t.target.matches("#arrow-right")&&n++,t.target.matches("#arrow-left")&&n--,t.target.matches(".dot")&&r.forEach(((e,a)=>{e===t.target&&(n=a)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),l(e,n,"portfolio-item-active"),l(r,n,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i()})(),document.querySelectorAll(".command .container .row img").forEach((e=>{e.dataset.prevImg=e.src,e.addEventListener("mouseenter",(e=>{e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(e=>{e.target.src=e.target.dataset.prevImg}))})),document.querySelectorAll('[type="email"]').forEach((e=>e.setAttribute("required",""))),document.addEventListener("input",(e=>{const t=e.target,a=document.querySelector(".form-btn");t.matches(".calc-item")&&(t.value=t.value.replace(/[^\d]/g,"")),t.matches('[type="tel"]')&&(t.value=t.value.replace(/[^\d+]/g,""),t.reportValidity(),t.setCustomValidity(""),t.value.match(/^\+/)?(t.setAttribute("maxlength","12"),t.value.length<12?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled")):t.value.match(/^7/)||t.value.match(/^8/)?(t.setAttribute("maxlength","11"),t.value.length<11?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled")):(t.setAttribute("maxlength","1"),a.setAttribute("disabled","disabled"),t.setCustomValidity("Ошибка! Поле должно начинаться с (+,7,8) и быть не длинее 11 или 12 символов"))),t.matches('[name="user_message"]')&&(t.value=t.value.replace(/[^а-яё0-9,.!?]/gi,"")),t.matches('[type="email"]')&&(t.value=t.value.replace(/^[^a-z@!_~'-.*]/gi,"")),t.matches('[name="user_name"]')&&(t.value=t.value.replace(/[^а-яё ]/gi,""))})),document.querySelectorAll("input").forEach((e=>{e.addEventListener("blur",(e=>{const t=e.target;if(t.matches('[type="email"]')&&(t.value=t.value.replace(/-+/g,"-")),t.matches('[name="user_message"]')&&(t.value=t.value.replace(/^\s+|\s+$/g,""),t.value=t.value.replace(/\s+/g," ")),t.matches('[name="user_name"]')){let e="";t.value.split(" ").forEach((t=>e+=t.charAt(0).toUpperCase()+t.slice(1)+" ")),t.value=e,t.value=t.value.replace(/^\s+|\s+$/g,""),t.value=t.value.replace(/\s+/g," ")}}))})),((e=100)=>{const t=document.querySelector(".calc-block"),a=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),n=document.querySelector(".calc-day"),r=document.querySelector("#total"),c=document.querySelector(".calc-count");t.addEventListener("input",(t=>{(t.target.matches("select")||t.target.matches("input"))&&(()=>{const t=a.value,l=o.value;let s=0,i=1,u=1,m=0;n.value&&n.value<5?u*=2:n.value&&n.value<10&&(u*=1.5),c.value>1&&(i+=(c.value-1)/10),t&&l&&(s=e*t*l*i);const d=()=>{const e=Math.ceil((s+1)/2e3);m+=50*e;const t=requestAnimationFrame(d);m<=s?r.textContent=Math.ceil(m):cancelAnimationFrame(t)};d()})()}))})(),(()=>{const e=document.createElement("div"),t={};document.addEventListener("submit",(a=>(a=>{a.preventDefault(),e.insertAdjacentHTML("afterbegin",'<img src="images/preloader.gif" >'),new FormData(a.target).forEach(((e,a)=>t[a]=e)),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(t).then((t=>{if(200!==t.status)throw new Error("Status not 200");e.textContent="Запрос отправлен"})).catch((()=>e.textContent="Ошибка")),e.style.color="#fff",a.target.appendChild(e),a.target.querySelectorAll("input").forEach((e=>e.value=""))})(a)))})()})();