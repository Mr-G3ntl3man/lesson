(() => { "use strict"; (e => { const t = document.querySelector("#timer-hours"), a = document.querySelector("#timer-minutes"), o = document.querySelector("#timer-seconds"); t.textContent = "00", a.textContent = "00", o.textContent = "00"; const r = e => e < 10 ? `0${e}` : e, n = () => { const e = new Date("10 july 2021").getTime(), t = (new Date).getTime(), a = (e - t) / 1e3, o = Math.floor(a % 60), r = Math.floor(a / 60 % 60); return { timeRemaining: a, hours: Math.floor(a / 60 / 60), minutes: r, seconds: o, dateStop: e, dateNow: t } }, c = setInterval((() => n().timeRemaining < 0 ? clearInterval(c) : (t.textContent = r(n().hours), a.textContent = r(n().minutes), void (o.textContent = r(n().seconds)))), 0) })(), (() => { const e = document.querySelector("main"), t = document.querySelector("menu"); let a = -10; const o = () => { a++; const r = requestAnimationFrame(o), n = t.getBoundingClientRect(), c = e.getBoundingClientRect(); c.right < 768 ? cancelAnimationFrame(r) : n.right < c.right ? (t.style.transform = `translateX(${10 * a}%)`, t.classList.add("active")) : cancelAnimationFrame(r) }, r = () => { a--; const e = requestAnimationFrame(r), o = t.getBoundingClientRect(); o.left > -o.width ? (t.style.transform = `translateX(${10 * a}%)`, t.classList.remove("active")) : cancelAnimationFrame(e) }; document.body.addEventListener("click", (e => { e.target.closest(".menu") && o(), e.target.closest("menu") || e.target.closest(".menu") || r(), e.target.classList.contains("close-btn") && r(), e.target.closest("menu ul>li>a") && r() })) })(), (() => { const e = document.querySelector(".popup"), t = document.querySelectorAll(".popup-btn"), a = document.querySelector(".popup-content"); let o = 0, r = -20; const n = () => { o += .1; const t = requestAnimationFrame(n); o <= 1 ? e.style.opacity = o : cancelAnimationFrame(t) }, c = () => { o -= .1; const t = requestAnimationFrame(c); o >= 0 ? e.style.opacity = o : cancelAnimationFrame(t) }, s = () => { r++; const e = requestAnimationFrame(s); 0 >= r ? a.style.transform = `translate(-50px,${5 * r}%)` : cancelAnimationFrame(e) }, l = () => { r--; const e = requestAnimationFrame(l); -30 <= r ? a.style.transform = `translate(-50px,${5 * r}%)` : cancelAnimationFrame(e) }; t.forEach((t => t.addEventListener("click", (() => { e.style.display = "block", e.style.opacity = "1", a.style.transform = "translate(-50px,0)", document.body.clientWidth > 768 && (e.style.opacity = "0", a.style.transform = "translate(-50px,-150%)", n(), setTimeout((() => s()), 200)) })))), e.addEventListener("click", (t => { const a = t.target.closest(".popup-content"); t.target.classList.contains("popup-close") && (document.body.clientWidth < 768 ? e.style.display = "none" : (l(), setTimeout((() => c()), 400), setTimeout((() => e.style.display = "none"), 500))), a || (document.body.clientWidth < 768 ? e.style.display = "none" : (l(), setTimeout((() => c()), 400), setTimeout((() => e.style.display = "none"), 500))) })) })(), (() => { const e = document.querySelector("a"); e.addEventListener("click", (t => ((e, t) => { t.preventDefault(); const a = e.href.split("#")[1]; document.querySelector(`#${a}`).scrollIntoView({ behavior: "smooth", block: "start" }) })(e, t))) })(), (() => { const e = document.querySelector(".service-header"), t = e.querySelectorAll(".service-header-tab"), a = document.querySelectorAll(".service-tab"); e.addEventListener("click", (e => { const o = e.target.closest(".service-header-tab"); o && t.forEach(((e, r) => { e === o && (e => { a.forEach(((o, r) => { e === r ? (t[r].classList.add("active"), a[r].classList.remove("d-none")) : (t[r].classList.remove("active"), a[r].classList.add("d-none")) })) })(r) })) })) })(), (() => { const e = document.querySelectorAll(".portfolio-item"), t = document.querySelector(".portfolio-content"), a = document.querySelector(".portfolio-dots"); let o, r = 0; e.length && a.insertAdjacentHTML("beforeend", "<li class='dot dot-active'></li>"); for (let t = 0; t < e.length - 1; t++)a.insertAdjacentHTML("beforeend", "<li class='dot'></li>"); const n = document.querySelectorAll(".dot"), c = (e, t, a) => e[t].classList.remove(a), s = (e, t, a) => e[t].classList.add(a), l = () => { c(e, r, "portfolio-item-active"), c(n, r, "dot-active"), r++, r >= e.length && (r = 0), s(e, r, "portfolio-item-active"), s(n, r, "dot-active") }, i = (e = 3e3) => o = setInterval(l, e); t.addEventListener("click", (t => { t.preventDefault(), t.target.matches(".portfolio-btn, .dot") && (c(e, r, "portfolio-item-active"), c(n, r, "dot-active"), t.target.matches("#arrow-right") && r++, t.target.matches("#arrow-left") && r--, t.target.matches(".dot") && n.forEach(((e, a) => { e === t.target && (r = a) })), r >= e.length && (r = 0), r < 0 && (r = e.length - 1), s(e, r, "portfolio-item-active"), s(n, r, "dot-active")) })), t.addEventListener("mouseover", (e => { (e.target.matches(".portfolio-btn") || e.target.matches(".dot")) && clearInterval(o) })), t.addEventListener("mouseout", (e => { (e.target.matches(".portfolio-btn") || e.target.matches(".dot")) && i() })), i() })(), document.querySelectorAll(".command .container .row img").forEach((e => { e.dataset.prevImg = e.src, e.addEventListener("mouseenter", (e => { e.target.src = e.target.dataset.img })), e.addEventListener("mouseleave", (e => { e.target.src = e.target.dataset.prevImg })) })), (() => { const e = document.querySelectorAll('[type="email"]'), t = document.querySelector("#form1 button"), a = document.querySelector("#form2 button"), o = document.querySelector("#form3 button"); e.forEach((e => e.setAttribute("required", ""))); const r = (e, t) => { e.style.cssText = "\tborder: 1px solid green;box-shadow: 0 0 10px green;", t && t.removeAttribute("disabled") }, n = (e, t) => { e.style.cssText = "border: 1px solid red;box-shadow: 0 0 10px red;\t", t && t.setAttribute("disabled", "disabled") }, c = (e, t, a) => { e.closest(t) && (e.matches('[type="tel"]') && (e.value = e.value.replace(/[^\d+]/g, ""), e.reportValidity(), /^\+\d{11}$/.test(e.value) || /^[78]\d{10}$/.test(e.value) ? (r(e, a), e.setCustomValidity("")) : (n(e, a), e.setCustomValidity("Ошибка! Поле должно начинаться с (+,7,8) и быть не длинее 11 или 12 символов"))), e.matches('[name="user_message"]') && (e.value = e.value.replace(/[^а-яё0-9 ,.!?]/gi, ""), "" !== e.value && /^[а-яё0-9,.!? ]+$/i.test(e.value) ? r(e, a) : n(e, a)), e.matches('[type="email"]') && (e.value = e.value.replace(/[^a-z@!_~'-.*]/gi, ""), /^\w+@\w+\.\w{2,3}$/.test(e.value) ? r(e, a) : n(e, a)), e.matches('[name="user_name"]') && (e.value = e.value.replace(/[^а-яё]/gi, ""), /^[а-яё]{2,}$/i.test(e.value) ? r(e, a) : n(e, a))) }; document.addEventListener("input", (e => { const s = e.target; s.matches(".calc-item") && (s.value = s.value.replace(/[^\d]/g, ""), /^\d+$/.test(s.value) ? r(s) : n(s)), c(s, "#form1", t), c(s, "#form2", a), c(s, "#form3", o) })), document.querySelectorAll("input").forEach((e => { e.addEventListener("blur", (e => { const t = e.target; if (t.matches('[type="email"]') && (t.value = t.value.replace(/-+/g, "-")), t.matches('[name="user_message"]') && (t.value = t.value.replace(/^\s+|\s+$/g, ""), t.value = t.value.replace(/\s+/g, " ")), t.matches('[name="user_name"]')) { let e = ""; t.value.split(" ").forEach((t => e += t.charAt(0).toUpperCase() + t.slice(1).toLowerCase() + " ")), t.value = e, t.value = t.value.replace(/^\s+|\s+$/g, ""), t.value = t.value.replace(/\s+/g, " ") } })) })) })(), ((e = 100) => { const t = document.querySelector(".calc-block"), a = document.querySelector(".calc-type"), o = document.querySelector(".calc-square"), r = document.querySelector(".calc-day"), n = document.querySelector("#total"), c = document.querySelector(".calc-count"); t.addEventListener("input", (t => { (t.target.matches("select") || t.target.matches("input")) && (() => { const t = a.value, s = o.value; let l = 0, i = 1, u = 1, m = 0; r.value && r.value < 5 ? u *= 2 : r.value && r.value < 10 && (u *= 1.5), c.value > 1 && (i += (c.value - 1) / 10), t && s && (l = e * t * s * i); const d = () => { const e = Math.ceil((l + 1) / 2e3); m += 50 * e; const t = requestAnimationFrame(d); m <= l ? n.textContent = Math.ceil(m) : cancelAnimationFrame(t) }; d() })() })) })(), (() => { const e = document.createElement("div"), t = {}; document.addEventListener("submit", (a => (a => { a.preventDefault(), document.querySelectorAll("form input").forEach((e => e.style.cssText = "box-shadow: transparent; border: none;")), e.insertAdjacentHTML("afterbegin", '<img src="images/preloader.gif" >'), new FormData(a.target).forEach(((e, a) => t[a] = e)), (e => fetch("./server.php", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(e) }))(t).then((t => { if (200 !== t.status) throw new Error("Status not 200"); e.textContent = "Запрос отправлен" })).catch((() => e.textContent = "Ошибка")), e.style.color = "#fff", a.target.appendChild(e), a.target.querySelectorAll("input").forEach((e => e.value = "")) })(a))) })() })();


