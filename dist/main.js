(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),a=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");t.textContent="00",a.textContent="00",n.textContent="00";const o=e=>e<10?`0${e}`:e,r=()=>{const e=new Date("30 june 2021").getTime(),t=(new Date).getTime(),a=(e-t)/1e3,n=Math.floor(a%60),o=Math.floor(a/60%60);return{timeRemaining:a,hours:Math.floor(a/60/60),minutes:o,seconds:n,dateStop:e,dateNow:t}},c=setInterval((()=>r().timeRemaining<0?clearInterval(c):(t.textContent=o(r().hours),a.textContent=o(r().minutes),void(n.textContent=o(r().seconds)))),0)})(),(()=>{const e=document.querySelector("main"),t=document.querySelector("menu");let a=-10;const n=()=>{a++;const o=requestAnimationFrame(n),r=t.getBoundingClientRect(),c=e.getBoundingClientRect();c.right<768?cancelAnimationFrame(o):r.right<c.right?(t.style.transform=`translateX(${10*a}%)`,t.classList.add("active")):cancelAnimationFrame(o)},o=()=>{a--;const e=requestAnimationFrame(o),n=t.getBoundingClientRect();n.left>-n.width?(t.style.transform=`translateX(${10*a}%)`,t.classList.remove("active")):cancelAnimationFrame(e)};document.body.addEventListener("click",(e=>{e.target.closest(".menu")&&n(),e.target.closest("menu")||e.target.closest(".menu")||o(),e.target.classList.contains("close-btn")&&o(),e.target.closest("menu ul>li>a")&&o()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),a=document.querySelector(".popup-content");let n=0,o=-20;const r=()=>{n+=.1;const t=requestAnimationFrame(r);n<=1?e.style.opacity=n:cancelAnimationFrame(t)},c=()=>{n-=.1;const t=requestAnimationFrame(c);n>=0?e.style.opacity=n:cancelAnimationFrame(t)},s=()=>{o++;const e=requestAnimationFrame(s);0>=o?a.style.transform=`translate(-50px,${5*o}%)`:cancelAnimationFrame(e)},l=()=>{o--;const e=requestAnimationFrame(l);-30<=o?a.style.transform=`translate(-50px,${5*o}%)`:cancelAnimationFrame(e)};t.forEach((t=>t.addEventListener("click",(()=>{e.style.display="block",window.innerWidth>768&&(e.style.opacity="0",a.style.transform="translate(-50px,-150%)",r(),setTimeout((()=>s()),200))})))),e.addEventListener("click",(t=>{const a=t.target.closest(".popup-content");t.target.classList.contains("popup-close")&&(window.innerWidth<768?e.style.display="none":(l(),setTimeout((()=>c()),400),setTimeout((()=>e.style.display="none"),500))),a||(window.innerWidth<768?e.style.display="none":(l(),setTimeout((()=>c()),400),setTimeout((()=>e.style.display="none"),500)))}))})(),(()=>{const e=document.querySelector("a");e.addEventListener("click",(t=>((e,t)=>{t.preventDefault();const a=e.href.split("#")[1];document.querySelector(`#${a}`).scrollIntoView({behavior:"smooth",block:"start"})})(e,t)))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{const n=e.target.closest(".service-header-tab");n&&t.forEach(((e,o)=>{e===n&&(e=>{a.forEach(((n,o)=>{e===o?(t[o].classList.add("active"),a[o].classList.remove("d-none")):(t[o].classList.remove("active"),a[o].classList.add("d-none"))}))})(o)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),a=document.querySelector(".portfolio-dots");let n,o=0;e.length&&a.insertAdjacentHTML("beforeend","<li class='dot dot-active'></li>");for(let t=0;t<e.length-1;t++)a.insertAdjacentHTML("beforeend","<li class='dot'></li>");const r=document.querySelectorAll(".dot"),c=(e,t,a)=>e[t].classList.remove(a),s=(e,t,a)=>e[t].classList.add(a),l=()=>{c(e,o,"portfolio-item-active"),c(r,o,"dot-active"),o++,o>=e.length&&(o=0),s(e,o,"portfolio-item-active"),s(r,o,"dot-active")},i=(e=3e3)=>n=setInterval(l,e);t.addEventListener("click",(t=>{t.preventDefault(),t.target.matches(".portfolio-btn, .dot")&&(c(e,o,"portfolio-item-active"),c(r,o,"dot-active"),t.target.matches("#arrow-right")&&o++,t.target.matches("#arrow-left")&&o--,t.target.matches(".dot")&&r.forEach(((e,a)=>{e===t.target&&(o=a)})),o>=e.length&&(o=0),o<0&&(o=e.length-1),s(e,o,"portfolio-item-active"),s(r,o,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i()})(),document.querySelectorAll(".command .container .row img").forEach((e=>{e.dataset.prevImg=e.src,e.addEventListener("mouseenter",(e=>{e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(e=>{e.target.src=e.target.dataset.prevImg}))})),document.addEventListener("input",(e=>{const t=e.target;t.matches(".calc-item")&&(t.value=t.value.replace(/[^\d]/g,"")),t.matches('[type="tel"]')&&(t.value=t.value.replace(/[^\d+]/g,"")),t.matches('[name="user_message"]')&&(t.value=t.value.replace(/[^а-яё0-9,.!?]/gi,"")),t.matches('[type="email"]')&&(t.value=t.value.replace(/^[^a-z@!_~'-.*]/gi,"")),t.matches('[name="user_name"]')&&(t.value=t.value.replace(/[^а-яё ]/gi,""))})),document.querySelectorAll("input").forEach((e=>{e.addEventListener("blur",(e=>{const t=e.target;if(t.matches('[type="email"]')&&(t.value=t.value.replace(/-+/g,"-")),t.matches('[name="user_message"]')&&(t.value=t.value.replace(/^\s+|\s+$/g,""),t.value=t.value.replace(/\s+/g," ")),t.matches('[name="user_name"]')){let e="";t.value.split(" ").forEach((t=>e+=t.charAt(0).toUpperCase()+t.slice(1)+" ")),t.value=e,t.value=t.value.replace(/^\s+|\s+$/g,""),t.value=t.value.replace(/\s+/g," ")}}))})),((e=100)=>{const t=document.querySelector(".calc-block"),a=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),o=document.querySelector(".calc-day"),r=document.querySelector("#total"),c=document.querySelector(".calc-count");t.addEventListener("input",(t=>{(t.target.matches("select")||t.target.matches("input"))&&(()=>{const t=a.value,s=n.value;let l=0,i=1,u=1,m=0;o.value&&o.value<5?u*=2:o.value&&o.value<10&&(u*=1.5),c.value>1&&(i+=(c.value-1)/10),t&&s&&(l=e*t*s*i);const d=()=>{const e=Math.ceil((l+1)/2e3);m+=50*e;const t=requestAnimationFrame(d);m<=l?r.textContent=Math.ceil(m):cancelAnimationFrame(t)};d()})()}))})(),(()=>{const e=document.createElement("div"),t={};document.addEventListener("submit",(a=>(a=>{a.preventDefault(),e.insertAdjacentHTML("afterbegin",'<img src="images/preloader.gif" >'),new FormData(a.target).forEach(((e,a)=>t[a]=e)),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(t).then((t=>{if(200!==t.status)throw new Error("Status not 200");e.textContent="Запрос отправлен"})).catch((()=>e.textContent="Ошибка")),e.style.color="#fff",a.target.appendChild(e),a.target.querySelectorAll("input").forEach((e=>e.value=""))})(a)))})()})();