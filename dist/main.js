(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),a=document.querySelector("#timer-seconds");t.textContent="00",o.textContent="00",a.textContent="00";const n=e=>e<10?`0${e}`:e,r=()=>{const e=new Date("10 july 2021").getTime(),t=(new Date).getTime(),o=(e-t)/1e3,a=Math.floor(o%60),n=Math.floor(o/60%60);return{timeRemaining:o,hours:Math.floor(o/60/60),minutes:n,seconds:a,dateStop:e,dateNow:t}},c=setInterval((()=>r().timeRemaining<0?clearInterval(c):(t.textContent=n(r().hours),o.textContent=n(r().minutes),void(a.textContent=n(r().seconds)))),0)})(),(()=>{const e=document.querySelector("main"),t=document.querySelector("menu");let o=-10;const a=()=>{o++;const n=requestAnimationFrame(a),r=t.getBoundingClientRect(),c=e.getBoundingClientRect();c.right<768?cancelAnimationFrame(n):r.right<c.right?(t.style.transform=`translateX(${10*o}%)`,t.classList.add("active")):cancelAnimationFrame(n)},n=()=>{o--;const e=requestAnimationFrame(n),a=t.getBoundingClientRect();a.left>-a.width?(t.style.transform=`translateX(${10*o}%)`,t.classList.remove("active")):cancelAnimationFrame(e)};document.body.addEventListener("click",(e=>{e.target.closest(".menu")&&a(),e.target.closest("menu")||e.target.closest(".menu")||n(),e.target.classList.contains("close-btn")&&n(),e.target.closest("menu ul>li>a")&&n()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content");let a=0,n=-20;const r=()=>{a+=.1;const t=requestAnimationFrame(r);a<=1?e.style.opacity=a:cancelAnimationFrame(t)},c=()=>{a-=.1;const t=requestAnimationFrame(c);a>=0?e.style.opacity=a:cancelAnimationFrame(t)},s=()=>{n++;const e=requestAnimationFrame(s);0>=n?o.style.transform=`translate(-50px,${5*n}%)`:cancelAnimationFrame(e)},l=()=>{n--;const e=requestAnimationFrame(l);-30<=n?o.style.transform=`translate(-50px,${5*n}%)`:cancelAnimationFrame(e)};t.forEach((t=>t.addEventListener("click",(()=>{e.style.display="block",e.style.opacity="1",o.style.transform="translate(-50px,0)",document.body.clientWidth>768&&(e.style.opacity="0",o.style.transform="translate(-50px,-150%)",r(),setTimeout((()=>s()),200))})))),e.addEventListener("click",(t=>{const o=t.target.closest(".popup-content");t.target.classList.contains("popup-close")&&(document.body.clientWidth<768?e.style.display="none":(l(),setTimeout((()=>c()),400),setTimeout((()=>e.style.display="none"),500))),o||(document.body.clientWidth<768?e.style.display="none":(l(),setTimeout((()=>c()),400),setTimeout((()=>e.style.display="none"),500)))}))})(),(()=>{const e=document.querySelector("a");e.addEventListener("click",(t=>((e,t)=>{t.preventDefault();const o=e.href.split("#")[1];document.querySelector(`#${o}`).scrollIntoView({behavior:"smooth",block:"start"})})(e,t)))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{const a=e.target.closest(".service-header-tab");a&&t.forEach(((e,n)=>{e===a&&(e=>{o.forEach(((a,n)=>{e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))}))})(n)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots");let a,n=0;e.length&&o.insertAdjacentHTML("beforeend","<li class='dot dot-active'></li>");for(let t=0;t<e.length-1;t++)o.insertAdjacentHTML("beforeend","<li class='dot'></li>");const r=document.querySelectorAll(".dot"),c=(e,t,o)=>e[t].classList.remove(o),s=(e,t,o)=>e[t].classList.add(o),l=()=>{c(e,n,"portfolio-item-active"),c(r,n,"dot-active"),n++,n>=e.length&&(n=0),s(e,n,"portfolio-item-active"),s(r,n,"dot-active")},i=(e=3e3)=>a=setInterval(l,e);t.addEventListener("click",(t=>{t.preventDefault(),t.target.matches(".portfolio-btn, .dot")&&(c(e,n,"portfolio-item-active"),c(r,n,"dot-active"),t.target.matches("#arrow-right")&&n++,t.target.matches("#arrow-left")&&n--,t.target.matches(".dot")&&r.forEach(((e,o)=>{e===t.target&&(n=o)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),s(e,n,"portfolio-item-active"),s(r,n,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i()})(),document.querySelectorAll(".command .container .row img").forEach((e=>{e.dataset.prevImg=e.src,e.addEventListener("mouseenter",(e=>{e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(e=>{e.target.src=e.target.dataset.prevImg}))})),(()=>{const e=document.querySelectorAll('[type="email"]'),t=document.querySelector("#form1 button"),o=document.querySelector("#form2 button"),a=document.querySelector("#form3 button");e.forEach((e=>e.setAttribute("required","")));const n=(e,t)=>{e.style.cssText="\tborder: 1px solid green;box-shadow: 0 0 10px green;",t&&t.removeAttribute("disabled")},r=(e,t)=>{e.style.cssText="border: 1px solid red;box-shadow: 0 0 10px red;\t",t&&t.setAttribute("disabled","disabled")},c=(e,t,o)=>{e.closest(t)&&(e.matches('[type="tel"]')&&(e.reportValidity(),e.setCustomValidity(""),/^\+\d{11}$/.test(e.value)||/^[78]\d{10}$/.test(e.value)?n(e,o):r(e,o),e.setCustomValidity("Ошибка! Поле должно начинаться с (+,7,8) и быть не длинее 11 или 12 символов")),e.matches('[name="user_message"]')&&(""!==e.value&&/^[а-яё0-9,.!? ]+$/i.test(e.value)?n(e,o):r(e,o)),e.matches('[type="email"]')&&(/-?\w+@\w+\.\w{2,3}/.test(e.value)?n(e,o):r(e,o)),e.matches('[name="user_name"]')&&(/^[а-яё]+ [а-яё]+$/i.test(e.value)?n(e,o):r(e,o)))};document.addEventListener("input",(e=>{const s=e.target;s.matches(".calc-item")&&(/^\d+$/.test(s.value)?n(s):r(s)),c(s,"#form1",t),c(s,"#form2",o),c(s,"#form3",a)})),document.querySelectorAll("input").forEach((e=>{e.addEventListener("blur",(e=>{const t=e.target;if(t.matches('[type="email"]')&&(t.value=t.value.replace(/-+/g,"-")),t.matches('[name="user_message"]')&&(t.value=t.value.replace(/^\s+|\s+$/g,""),t.value=t.value.replace(/\s+/g," ")),t.matches('[name="user_name"]')){let e="";t.value.split(" ").forEach((t=>e+=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()+" ")),t.value=e,t.value=t.value.replace(/^\s+|\s+$/g,""),t.value=t.value.replace(/\s+/g," ")}}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),n=document.querySelector(".calc-day"),r=document.querySelector("#total"),c=document.querySelector(".calc-count");t.addEventListener("input",(t=>{(t.target.matches("select")||t.target.matches("input"))&&(()=>{const t=o.value,s=a.value;let l=0,i=1,u=1,m=0;n.value&&n.value<5?u*=2:n.value&&n.value<10&&(u*=1.5),c.value>1&&(i+=(c.value-1)/10),t&&s&&(l=e*t*s*i);const d=()=>{const e=Math.ceil((l+1)/2e3);m+=50*e;const t=requestAnimationFrame(d);m<=l?r.textContent=Math.ceil(m):cancelAnimationFrame(t)};d()})()}))})(),(()=>{const e=document.createElement("div"),t={};document.addEventListener("submit",(o=>(o=>{o.preventDefault(),e.insertAdjacentHTML("afterbegin",'<img src="images/preloader.gif" >'),new FormData(o.target).forEach(((e,o)=>t[o]=e)),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(t).then((t=>{if(200!==t.status)throw new Error("Status not 200");e.textContent="Запрос отправлен"})).catch((()=>e.textContent="Ошибка")),e.style.color="#fff",o.target.appendChild(e),o.target.querySelectorAll("input").forEach((e=>e.value=""))})(o)))})()})();